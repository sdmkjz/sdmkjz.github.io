<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>基于Docker容器的HEXO博客</title>
      <link href="/2021/07/26/ji-yu-docker-rong-qi-de-hexo-bo-ke/"/>
      <url>/2021/07/26/ji-yu-docker-rong-qi-de-hexo-bo-ke/</url>
      
        <content type="html"><![CDATA[<h2 id="基于Docker容器的HEXO博客"><a href="#基于Docker容器的HEXO博客" class="headerlink" title="基于Docker容器的HEXO博客"></a>基于Docker容器的HEXO博客</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>hexo是一个基于Node.js 快速、简洁且高效的博客框架。</p><p>Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件</p><p>同时支持部署到Github Pages等平台</p><p>本镜像启动即用，部署简单，同时支持amd64/arm64架构</p><h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>创建一个新的博客容器，-p为后台运行(可选)–name=为容器名，可自行指定，使用 -v target:/app 指定您的博客位置,-p为端口映射-p 4000:4000前端口可自行更改：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker run -p --name<span class="token operator">=</span>hexo <span class="token punctuation">\</span>-v /blog:/app <span class="token punctuation">\</span>-p <span class="token number">4000</span>:4000 <span class="token punctuation">\</span>mkjz/hexo:silm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker run -p --name<span class="token operator">=</span>hexo <span class="token punctuation">\</span>-v /blog:/app <span class="token punctuation">\</span>-p <span class="token number">4000</span>:4000 <span class="token punctuation">\</span>mkjz/hexo:latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注：</strong></p><p><strong>1.silm镜像为精简版本，镜像内除hexo-cli外 没有额外安装任何软件包以及npm插件 若有diy需求 请自行访问容器使用指令安装(若为arm64架构，请在tag后指定-arm64版本 例:mkjz/hexo:silm-arm64 )</strong></p><p><strong>2.latest镜像为全量版本，包含git,hexo-permalink-pinyin,hexo-wordcount常用插件，目前只支持amd64架构</strong></p><h3 id="访问Hexo"><a href="#访问Hexo" class="headerlink" title="访问Hexo"></a>访问Hexo</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">访问hexo博客界面 http://<span class="token operator">&lt;</span>ip_address<span class="token operator">></span>:4000  此端口可在启动命令-p中自定义<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="访问容器"><a href="#访问容器" class="headerlink" title="访问容器"></a>访问容器</h3><p>如果您希望执行进一步的配置，即安装自定义主题与安装npm包，可以通过如下指令。访问容器 </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker <span class="token builtin class-name">exec</span> -it hexo /bin/sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>修改配置文件或添加主题后，需重启容器，网站将自动重构</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker restart 容器名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看日志</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker logs 容器名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker镜像命令</title>
      <link href="/2021/07/26/docker-jing-xiang-ming-ling/"/>
      <url>/2021/07/26/docker-jing-xiang-ming-ling/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker镜像命令"><a href="#Docker镜像命令" class="headerlink" title="Docker镜像命令"></a>Docker镜像命令</h1><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker version  # 显示docker的版本信息docker info    # 显示docker的系统信息 包括容器和镜像数量docker 命令 --help # 帮助命令<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h3><h4 id="docker-images-查看所有镜像"><a href="#docker-images-查看所有镜像" class="headerlink" title="docker images 查看所有镜像"></a>docker images 查看所有镜像</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost ~]# docker imagesREPOSITORY    TAG                IMAGE ID       CREATED         SIZEmkjz&#x2F;centos   latest             ad89ab41f5d7   40 hours ago    304MBtomcat        latest             921ef208ab56   2 days ago      668MBmysql         latest             95db2e2bd882   4 days ago      514MBsbwml&#x2F;alist   latest             ae685d913f61   13 days ago     28.9MBredis         5.0.9-alpine3.11   3661c84ee9d0   15 months ago   29.8MBREPOSITORY 仓库源TAG 版本信息IMAGE ID 镜像IDCREATED 镜像创建时间SIZE 镜像大小# 可选项Options:  -a, --all             Show all images (default hides intermediate images)      --digests         Show digests  -f, --filter filter   Filter output based on conditions provided      --format string   Pretty-print images using a Go template      --no-trunc        Don&#39;t truncate output  -q, --quiet           Only show image IDs 只显示镜像ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="docker-search-搜索镜像"><a href="#docker-search-搜索镜像" class="headerlink" title="docker search 搜索镜像"></a>docker search 搜索镜像</h4><pre class="line-numbers language-she" data-language="she"><code class="language-she">[root@localhost ~]# docker search mysqlNAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDmysql                             MySQL is a widely used, open-source relation…   11158     [OK]       mariadb                           MariaDB Server is a high performing open sou…   4235      [OK]       mysql&#x2F;mysql-server                Optimized MySQL Server Docker images. Create…   830                  [OK]percona                           Percona Server is a fork of the MySQL relati…   548       [OK]       phpmyadmin                        phpMyAdmin - A web interface for MySQL and M…   277       [OK]       centos&#x2F;mysql-57-centos7           MySQL 5.7 SQL database server                   90                   # 可选项Options:  -f, --filter filter   Filter output based on conditions provided      --format string   Pretty-print search using a Go template      --limit int       Max number of search results (default 25)      --no-trunc        Don&#39;t truncate output--filter&#x3D;STARS&#x3D;3000 # 搜索出来的STARS是大于3000的<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="docker-pull-下载镜像"><a href="#docker-pull-下载镜像" class="headerlink" title="docker pull 下载镜像"></a>docker pull 下载镜像</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@localhost ~]# docker pull redisUsing default tag: latest # 如果不写Tag 默认为最新版本latest: Pulling from library&#x2F;redis # 分层下载，docker联合文件系统33847f680f63: Pull complete 26a746039521: Pull complete 18d87da94363: Pull complete 5e118a708802: Pull complete ecf0dbe7c357: Pull complete 46f280ba52da: Pull complete Digest: sha256:cd0c68c5479f2db4b9e2c5fbfdb7a8acb77625322dd5b474578515422d3ddb59Status: Downloaded newer image for redis:latestdocker.io&#x2F;library&#x2F;redis:latest # 真实地址<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="docker-rmi-删除镜像"><a href="#docker-rmi-删除镜像" class="headerlink" title="docker rmi 删除镜像"></a>docker rmi 删除镜像</h4><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">[root@localhost ~]# docker rmi redis # 删除指定容器docker rmi 容器名 容器名 容器名 # 删除多个容器docker rmi $(docker images -aq) # 删除全部容器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="docker-commit-提交镜像"><a href="#docker-commit-提交镜像" class="headerlink" title="docker commit 提交镜像"></a>docker commit 提交镜像</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker commit 提交容器成为一个新的副本docker commit -m&#x3D;&#39;提交描述的信息&#39; -a&#x3D;&#39;作者&#39; 容器名称 目标镜像名:[tag]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker容器常用命令</title>
      <link href="/2021/07/25/docker-rong-qi-chang-yong-ming-ling/"/>
      <url>/2021/07/25/docker-rong-qi-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker容器命令"><a href="#Docker容器命令" class="headerlink" title="Docker容器命令"></a>Docker容器命令</h1><h3 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h3><pre class="line-numbers language-shel" data-language="shel"><code class="language-shel">docker run [可选参数] 镜像名称# 参数说明--name&#x3D; 容器名称-d 后台运行方式-it 采用交互模式运行-p 主机端口:容器端口 指定容器端口映射 -P 随机指定端口-v 卷挂载-e 环境配置<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="列出所有的容器"><a href="#列出所有的容器" class="headerlink" title="列出所有的容器"></a>列出所有的容器</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker ps命令# 列出正在运行的容器-a # 列出所有的容器-n&#x3D;? # 显示最近创建的容器-q # 只显示容器ID[root@localhost ~]# docker psCONTAINER ID   IMAGE                    COMMAND                  CREATED        STATUS        PORTS                                                                                      NAMES11025ffd4e80   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.s…&quot;   11 hours ago   Up 11 hours   0.0.0.0:6376-&gt;6379&#x2F;tcp, :::6376-&gt;6379&#x2F;tcp, 0.0.0.0:16376-&gt;16379&#x2F;tcp, :::16376-&gt;16379&#x2F;tcp   redis-631b5ce0cd98c   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.s…&quot;   11 hours ago   Up 11 hours   0.0.0.0:6375-&gt;6379&#x2F;tcp, :::6375-&gt;6379&#x2F;tcp, 0.0.0.0:16375-&gt;16379&#x2F;tcp, :::16375-&gt;16379&#x2F;tcp   redis-5ccc05f2ab8bc   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.s…&quot;   11 hours ago   Up 11 hours   0.0.0.0:6374-&gt;6379&#x2F;tcp, :::6374-&gt;6379&#x2F;tcp, 0.0.0.0:16374-&gt;16379&#x2F;tcp, :::16374-&gt;16379&#x2F;tcp   redis-420e40bf0dc2b   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.s…&quot;   11 hours ago   Up 11 hours   0.0.0.0:6373-&gt;6379&#x2F;tcp, :::6373-&gt;6379&#x2F;tcp, 0.0.0.0:16373-&gt;16379&#x2F;tcp, :::16373-&gt;16379&#x2F;tcp   redis-3f32e7a237dc7   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.s…&quot;   11 hours ago   Up 11 hours   0.0.0.0:6372-&gt;6379&#x2F;tcp, :::6372-&gt;6379&#x2F;tcp, 0.0.0.0:16372-&gt;16379&#x2F;tcp, :::16372-&gt;16379&#x2F;tcp   redis-29b52db0451d1   redis:5.0.9-alpine3.11   &quot;docker-entrypoint.s…&quot;   11 hours ago   Up 11 hours   0.0.0.0:6371-&gt;6379&#x2F;tcp, :::6371-&gt;6379&#x2F;tcp, 0.0.0.0:16371-&gt;16379&#x2F;tcp, :::16371-&gt;16379&#x2F;tcp   redis-1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h3><pre class="line-numbers language-shel" data-language="shel"><code class="language-shel">exitctrl + P + Q # 容器不停止退出<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><pre class="line-numbers language-shel" data-language="shel"><code class="language-shel">docker rm 容器ID或名称 # 不能删除正在运行的容器 如果要强制删除rm -fdocker rm -f $(docker ps -aq) # 删除所有容器docker ps -a -q | xargs docker rm # 删除所有容器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="启动和停止容器操作"><a href="#启动和停止容器操作" class="headerlink" title="启动和停止容器操作"></a>启动和停止容器操作</h3><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">docker start 容器ID或名称docker stop 容器ID或名称docker restart 容器ID或名称docker kill 容器ID或名称 # 强制停止容器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="常用其他命令"><a href="#常用其他命令" class="headerlink" title="常用其他命令"></a>常用其他命令</h2><h3 id="后台启动命令"><a href="#后台启动命令" class="headerlink" title="后台启动命令"></a>后台启动命令</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker run -d 镜像名 # 常见问题：docker容器使用后台运行，就必须要有一个前台进程，否则docker发现没有 应用，就会自己停止。 # nginx容器启动后，发现自己没有提供服务，就会立即停止<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h3><pre class="line-numbers language-shel" data-language="shel"><code class="language-shel">docker logs 容器名 # 可选参数 -f 持续显示日志 -t 显示日志时间戳 -n 自定义日志条数显示<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看容器中进程信息"><a href="#查看容器中进程信息" class="headerlink" title="查看容器中进程信息"></a>查看容器中进程信息</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker top 容器名 UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD polkitd             48681               48660               0                   7月23                ?                   00:01:21            redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="查看容器元数据"><a href="#查看容器元数据" class="headerlink" title="查看容器元数据##"></a>查看容器元数据##</h3><pre class="line-numbers language-shel" data-language="shel"><code class="language-shel">docker inspect 容器名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="headerlink" title="进入当前正在运行的容器"></a>进入当前正在运行的容器</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 方式一 docker exec -it 容器名 &#x2F;bin&#x2F;bash 或 sh 进入容器后开启一个新的终端，可以在里面操作(常用) # 方式二 docker attach -it 容器名 &#x2F;bin&#x2F;bash 或 sh 进入容器当前正在运行的终端<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="从容器内拷贝文件到主机上"><a href="#从容器内拷贝文件到主机上" class="headerlink" title="从容器内拷贝文件到主机上"></a>从容器内拷贝文件到主机上</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker cp 容器名：容器内路径 目的主机路径<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker run -v 本机目录：容器目录 docker run --it -v &#x2F;home&#x2F;ceshi:&#x2F;home centos &#x2F;bin&#x2F;bash 实现数据持久化<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="具名挂载和匿名挂载"><a href="#具名挂载和匿名挂载" class="headerlink" title="具名挂载和匿名挂载"></a>具名挂载和匿名挂载</h3><pre class="line-numbers language-shel" data-language="shel"><code class="language-shel"># 匿名挂载-V 容器内路径docker run -d -P --name nginx01 -v &#x2F;etc&#x2F;nginx nginx# 查看所有volume的情况docker volume ls# 具名挂载docker -run -d -P --name nginx02 -v juming-nginx:&#x2F;etc&#x2F;nginx nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>所有的docker容器内的卷，没有指定目录的情况下都在/var/lib/docker/volumes/xxxx/_data</p><p>我们通过具名挂载可以方便的找到我们的一个卷，大多数情况在使用的具名挂载</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-v 容器内路径 # 匿名挂载-v 卷名:容器内路径 # 具名挂载-v &#x2F;宿主机路径：&#x2F;容器内路径 # 指定路径挂载<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 通过-v容器内路径 ：ro rw改变读写权限ro readonly # 只读rw readwrite # 可读可写docker run -d -P --name nginx01 -v juming-nginx:&#x2F;etc&#x2F;nginx:ro nginxdocker run -d -P --name nginx01 -v juming-nginx:&#x2F;etc&#x2F;nginx:rw nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h3><p>多个mysql数据同步</p><pre class="line-numbers language-shel" data-language="shel"><code class="language-shel">docker run -d -p 3310:3306 -v &#x2F;etc&#x2F;mysql&#x2F;conf.d -v &#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;123456 --name mysql01 mysql:5.7docker run -d -p 3310:3306 -e MYSQL_ROOT_PASSWORD&#x3D;123456 --name mysql02 --volumes-form mysql01 mysql:5.7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2021/07/25/hello-world/"/>
      <url>/2021/07/25/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
